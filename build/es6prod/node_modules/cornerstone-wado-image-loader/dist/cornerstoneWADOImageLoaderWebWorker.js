(function webpackUniversalModuleDefinition(root,factory){if("object"===typeof exports&&"object"===typeof module)module.exports=factory();else if("function"===typeof define&&define.amd)define("cornerstoneWADOImageLoaderWebWorker",[],factory);else if("object"===typeof exports)exports.cornerstoneWADOImageLoaderWebWorker=factory();else root.cornerstoneWADOImageLoaderWebWorker=factory()})(this,function(){return function(modules){function hotDisposeChunk(chunkId){delete installedChunks[chunkId]}var parentHotUpdateCallback=this.webpackHotUpdate_name_;this.webpackHotUpdate_name_=function webpackHotUpdateCallback(chunkId,moreModules){hotAddUpdateChunk(chunkId,moreModules);if(parentHotUpdateCallback)parentHotUpdateCallback(chunkId,moreModules)};function hotDownloadUpdateChunk(chunkId){var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.charset="utf-8";script.src=__webpack_require__.p+""+chunkId+"."+hotCurrentHash+".hot-update.js";if(null)script.crossOrigin=null;head.appendChild(script)}function hotDownloadManifest(requestTimeout){requestTimeout=requestTimeout||1e4;return new Promise(function(resolve,reject){if("undefined"===typeof XMLHttpRequest){return reject(new Error("No browser support"))}try{var request=new XMLHttpRequest,requestPath=__webpack_require__.p+""+hotCurrentHash+".hot-update.json";request.open("GET",requestPath,!0);request.timeout=requestTimeout;request.send(null)}catch(err){return reject(err)}request.onreadystatechange=function(){if(4!==request.readyState)return;if(0===request.status){reject(new Error("Manifest request to "+requestPath+" timed out."))}else if(404===request.status){resolve()}else if(200!==request.status&&304!==request.status){reject(new Error("Manifest request to "+requestPath+" failed."))}else{try{var update=JSON.parse(request.responseText)}catch(e){reject(e);return}resolve(update)}}})}var hotApplyOnUpdate=!0,hotCurrentHash="8ffa164be7f9a32e3dae",hotRequestTimeout=1e4,hotCurrentModuleData={},hotCurrentChildModule,hotCurrentParents=[],hotCurrentParentsTemp=[];function hotCreateRequire(moduleId){var me=installedModules[moduleId];if(!me)return __webpack_require__;var fn=function(request){if(me.hot.active){if(installedModules[request]){if(-1===installedModules[request].parents.indexOf(moduleId)){installedModules[request].parents.push(moduleId)}}else{hotCurrentParents=[moduleId];hotCurrentChildModule=request}if(-1===me.children.indexOf(request)){me.children.push(request)}}else{console.warn("[HMR] unexpected require("+request+") from disposed module "+moduleId);hotCurrentParents=[]}return __webpack_require__(request)},ObjectFactory=function ObjectFactory(name){return{configurable:!0,enumerable:!0,get:function(){return __webpack_require__[name]},set:function(value){__webpack_require__[name]=value}}};for(var name in __webpack_require__){if(Object.prototype.hasOwnProperty.call(__webpack_require__,name)&&"e"!==name&&"t"!==name){Object.defineProperty(fn,name,ObjectFactory(name))}}fn.e=function(chunkId){if("ready"===hotStatus)hotSetStatus("prepare");hotChunksLoading++;return __webpack_require__.e(chunkId).then(finishChunkLoading,function(err){finishChunkLoading();throw err});function finishChunkLoading(){hotChunksLoading--;if("prepare"===hotStatus){if(!hotWaitingFilesMap[chunkId]){hotEnsureUpdateChunk(chunkId)}if(0===hotChunksLoading&&0===hotWaitingFiles){hotUpdateDownloaded()}}}};fn.t=function(value,mode){if(1&mode)value=fn(value);return __webpack_require__.t(value,~1&mode)};return fn}function hotCreateModule(moduleId){var hot={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:hotCurrentChildModule!==moduleId,active:!0,accept:function(dep,callback){if(dep===void 0)hot._selfAccepted=!0;else if("function"===typeof dep)hot._selfAccepted=dep;else if("object"===typeof dep)for(var i=0;i<dep.length;i++)hot._acceptedDependencies[dep[i]]=callback||function(){};else hot._acceptedDependencies[dep]=callback||function(){}},decline:function(dep){if(dep===void 0)hot._selfDeclined=!0;else if("object"===typeof dep)for(var i=0;i<dep.length;i++)hot._declinedDependencies[dep[i]]=!0;else hot._declinedDependencies[dep]=!0},dispose:function(callback){hot._disposeHandlers.push(callback)},addDisposeHandler:function(callback){hot._disposeHandlers.push(callback)},removeDisposeHandler:function(callback){var idx=hot._disposeHandlers.indexOf(callback);if(0<=idx)hot._disposeHandlers.splice(idx,1)},check:hotCheck,apply:hotApply,status:function(l){if(!l)return hotStatus;hotStatusHandlers.push(l)},addStatusHandler:function(l){hotStatusHandlers.push(l)},removeStatusHandler:function(l){var idx=hotStatusHandlers.indexOf(l);if(0<=idx)hotStatusHandlers.splice(idx,1)},data:hotCurrentModuleData[moduleId]};hotCurrentChildModule=void 0;return hot}var hotStatusHandlers=[],hotStatus="idle";function hotSetStatus(newStatus){hotStatus=newStatus;for(var i=0;i<hotStatusHandlers.length;i++)hotStatusHandlers[i].call(null,newStatus)}var hotWaitingFiles=0,hotChunksLoading=0,hotWaitingFilesMap={},hotRequestedFilesMap={},hotAvailableFilesMap={},hotDeferred,hotUpdate,hotUpdateNewHash;function toModuleId(id){var isNumber=+id+""===id;return isNumber?+id:id}function hotCheck(apply){if("idle"!==hotStatus){throw new Error("check() is only allowed in idle status")}hotApplyOnUpdate=apply;hotSetStatus("check");return hotDownloadManifest(hotRequestTimeout).then(function(update){if(!update){hotSetStatus("idle");return null}hotRequestedFilesMap={};hotWaitingFilesMap={};hotAvailableFilesMap=update.c;hotUpdateNewHash=update.h;hotSetStatus("prepare");var promise=new Promise(function(resolve,reject){hotDeferred={resolve:resolve,reject:reject}});hotUpdate={};var chunkId="cornerstoneWADOImageLoaderWebWorker";{hotEnsureUpdateChunk(chunkId)}if("prepare"===hotStatus&&0===hotChunksLoading&&0===hotWaitingFiles){hotUpdateDownloaded()}return promise})}function hotAddUpdateChunk(chunkId,moreModules){if(!hotAvailableFilesMap[chunkId]||!hotRequestedFilesMap[chunkId])return;hotRequestedFilesMap[chunkId]=!1;for(var moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){hotUpdate[moduleId]=moreModules[moduleId]}}if(0===--hotWaitingFiles&&0===hotChunksLoading){hotUpdateDownloaded()}}function hotEnsureUpdateChunk(chunkId){if(!hotAvailableFilesMap[chunkId]){hotWaitingFilesMap[chunkId]=!0}else{hotRequestedFilesMap[chunkId]=!0;hotWaitingFiles++;hotDownloadUpdateChunk(chunkId)}}function hotUpdateDownloaded(){hotSetStatus("ready");var deferred=hotDeferred;hotDeferred=null;if(!deferred)return;if(hotApplyOnUpdate){Promise.resolve().then(function(){return hotApply(hotApplyOnUpdate)}).then(function(result){deferred.resolve(result)},function(err){deferred.reject(err)})}else{var outdatedModules=[];for(var id in hotUpdate){if(Object.prototype.hasOwnProperty.call(hotUpdate,id)){outdatedModules.push(toModuleId(id))}}deferred.resolve(outdatedModules)}}function hotApply(options){if("ready"!==hotStatus)throw new Error("apply() is only allowed in ready status");options=options||{};var cb,i,j,module,moduleId;function getAffectedStuff(updateModuleId){var outdatedModules=[updateModuleId],outdatedDependencies={},queue=outdatedModules.slice().map(function(id){return{chain:[id],id:id}});while(0<queue.length){var queueItem=queue.pop(),moduleId=queueItem.id,chain=queueItem.chain;module=installedModules[moduleId];if(!module||module.hot._selfAccepted)continue;if(module.hot._selfDeclined){return{type:"self-declined",chain:chain,moduleId:moduleId}}if(module.hot._main){return{type:"unaccepted",chain:chain,moduleId:moduleId}}for(var i=0;i<module.parents.length;i++){var parentId=module.parents[i],parent=installedModules[parentId];if(!parent)continue;if(parent.hot._declinedDependencies[moduleId]){return{type:"declined",chain:chain.concat([parentId]),moduleId:moduleId,parentId:parentId}}if(-1!==outdatedModules.indexOf(parentId))continue;if(parent.hot._acceptedDependencies[moduleId]){if(!outdatedDependencies[parentId])outdatedDependencies[parentId]=[];addAllToSet(outdatedDependencies[parentId],[moduleId]);continue}delete outdatedDependencies[parentId];outdatedModules.push(parentId);queue.push({chain:chain.concat([parentId]),id:parentId})}}return{type:"accepted",moduleId:updateModuleId,outdatedModules:outdatedModules,outdatedDependencies:outdatedDependencies}}function addAllToSet(a,b){for(var i=0,item;i<b.length;i++){item=b[i];if(-1===a.indexOf(item))a.push(item)}}var outdatedDependencies={},outdatedModules=[],appliedUpdate={},warnUnexpectedRequire=function warnUnexpectedRequire(){console.warn("[HMR] unexpected require("+result.moduleId+") to disposed module")};for(var id in hotUpdate){if(Object.prototype.hasOwnProperty.call(hotUpdate,id)){moduleId=toModuleId(id);var result;if(hotUpdate[id]){result=getAffectedStuff(moduleId)}else{result={type:"disposed",moduleId:id}}var abortError=!1,doApply=!1,doDispose=!1,chainInfo="";if(result.chain){chainInfo="\nUpdate propagation: "+result.chain.join(" -> ")}switch(result.type){case"self-declined":if(options.onDeclined)options.onDeclined(result);if(!options.ignoreDeclined)abortError=new Error("Aborted because of self decline: "+result.moduleId+chainInfo);break;case"declined":if(options.onDeclined)options.onDeclined(result);if(!options.ignoreDeclined)abortError=new Error("Aborted because of declined dependency: "+result.moduleId+" in "+result.parentId+chainInfo);break;case"unaccepted":if(options.onUnaccepted)options.onUnaccepted(result);if(!options.ignoreUnaccepted)abortError=new Error("Aborted because "+moduleId+" is not accepted"+chainInfo);break;case"accepted":if(options.onAccepted)options.onAccepted(result);doApply=!0;break;case"disposed":if(options.onDisposed)options.onDisposed(result);doDispose=!0;break;default:throw new Error("Unexception type "+result.type);}if(abortError){hotSetStatus("abort");return Promise.reject(abortError)}if(doApply){appliedUpdate[moduleId]=hotUpdate[moduleId];addAllToSet(outdatedModules,result.outdatedModules);for(moduleId in result.outdatedDependencies){if(Object.prototype.hasOwnProperty.call(result.outdatedDependencies,moduleId)){if(!outdatedDependencies[moduleId])outdatedDependencies[moduleId]=[];addAllToSet(outdatedDependencies[moduleId],result.outdatedDependencies[moduleId])}}}if(doDispose){addAllToSet(outdatedModules,[result.moduleId]);appliedUpdate[moduleId]=warnUnexpectedRequire}}}var outdatedSelfAcceptedModules=[];for(i=0;i<outdatedModules.length;i++){moduleId=outdatedModules[i];if(installedModules[moduleId]&&installedModules[moduleId].hot._selfAccepted)outdatedSelfAcceptedModules.push({module:moduleId,errorHandler:installedModules[moduleId].hot._selfAccepted})}hotSetStatus("dispose");Object.keys(hotAvailableFilesMap).forEach(function(chunkId){if(!1===hotAvailableFilesMap[chunkId]){hotDisposeChunk(chunkId)}});var idx,queue=outdatedModules.slice();while(0<queue.length){moduleId=queue.pop();module=installedModules[moduleId];if(!module)continue;var data={},disposeHandlers=module.hot._disposeHandlers;for(j=0;j<disposeHandlers.length;j++){cb=disposeHandlers[j];cb(data)}hotCurrentModuleData[moduleId]=data;module.hot.active=!1;delete installedModules[moduleId];delete outdatedDependencies[moduleId];for(j=0;j<module.children.length;j++){var child=installedModules[module.children[j]];if(!child)continue;idx=child.parents.indexOf(moduleId);if(0<=idx){child.parents.splice(idx,1)}}}var dependency,moduleOutdatedDependencies;for(moduleId in outdatedDependencies){if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId)){module=installedModules[moduleId];if(module){moduleOutdatedDependencies=outdatedDependencies[moduleId];for(j=0;j<moduleOutdatedDependencies.length;j++){dependency=moduleOutdatedDependencies[j];idx=module.children.indexOf(dependency);if(0<=idx)module.children.splice(idx,1)}}}}hotSetStatus("apply");hotCurrentHash=hotUpdateNewHash;for(moduleId in appliedUpdate){if(Object.prototype.hasOwnProperty.call(appliedUpdate,moduleId)){modules[moduleId]=appliedUpdate[moduleId]}}var error=null;for(moduleId in outdatedDependencies){if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId)){module=installedModules[moduleId];if(module){moduleOutdatedDependencies=outdatedDependencies[moduleId];var callbacks=[];for(i=0;i<moduleOutdatedDependencies.length;i++){dependency=moduleOutdatedDependencies[i];cb=module.hot._acceptedDependencies[dependency];if(cb){if(-1!==callbacks.indexOf(cb))continue;callbacks.push(cb)}}for(i=0;i<callbacks.length;i++){cb=callbacks[i];try{cb(moduleOutdatedDependencies)}catch(err){if(options.onErrored){options.onErrored({type:"accept-errored",moduleId:moduleId,dependencyId:moduleOutdatedDependencies[i],error:err})}if(!options.ignoreErrored){if(!error)error=err}}}}}}for(i=0;i<outdatedSelfAcceptedModules.length;i++){var item=outdatedSelfAcceptedModules[i];moduleId=item.module;hotCurrentParents=[moduleId];try{__webpack_require__(moduleId)}catch(err){if("function"===typeof item.errorHandler){try{item.errorHandler(err)}catch(err2){if(options.onErrored){options.onErrored({type:"self-accept-error-handler-errored",moduleId:moduleId,error:err2,originalError:err})}if(!options.ignoreErrored){if(!error)error=err2}if(!error)error=err}}else{if(options.onErrored){options.onErrored({type:"self-accept-errored",moduleId:moduleId,error:err})}if(!options.ignoreErrored){if(!error)error=err}}}}if(error){hotSetStatus("fail");return Promise.reject(error)}hotSetStatus("idle");return new Promise(function(resolve){resolve(outdatedModules)})}var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{},hot:hotCreateModule(moduleId),parents:(hotCurrentParentsTemp=hotCurrentParents,hotCurrentParents=[],hotCurrentParentsTemp),children:[]};modules[moduleId].call(module.exports,module,module.exports,hotCreateRequire(moduleId));module.l=!0;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:!0,get:getter})}};__webpack_require__.r=function(exports){if("undefined"!==typeof Symbol&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:!0})};__webpack_require__.t=function(value,mode){if(1&mode)value=__webpack_require__(value);if(8&mode)return value;if(4&mode&&"object"===typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:!0,value:value});if(2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.h=function(){return hotCurrentHash};return hotCreateRequire("./webWorker/index.js")(__webpack_require__.s="./webWorker/index.js")}({"./shared/calculateMinMax.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return calculateMinMax});var _getMinMax_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./shared/getMinMax.js");function calculateMinMax(imageFrame){var strict=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,minMax=Object(_getMinMax_js__WEBPACK_IMPORTED_MODULE_0__["default"])(imageFrame.pixelData),mustAssign=!(isNumber(imageFrame.smallestPixelValue)&&isNumber(imageFrame.largestPixelValue));if(!0===strict&&!mustAssign){if(imageFrame.smallestPixelValue!==minMax.min){console.warn("Image smallestPixelValue tag is incorrect. Rendering performance will suffer considerably.")}if(imageFrame.largestPixelValue!==minMax.max){console.warn("Image largestPixelValue tag is incorrect. Rendering performance will suffer considerably.")}}else{imageFrame.smallestPixelValue=minMax.min;imageFrame.largestPixelValue=minMax.max}}function isNumber(numValue){return"number"===typeof numValue}},"./shared/decodeImageFrame.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _decoders_decodeLittleEndian_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./shared/decoders/decodeLittleEndian.js"),_decoders_decodeBigEndian_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./shared/decoders/decodeBigEndian.js"),_decoders_decodeRLE_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./shared/decoders/decodeRLE.js"),_decoders_decodeJPEGBaseline_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/decoders/decodeJPEGBaseline.js"),_decoders_decodeJPEGLossless_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./shared/decoders/decodeJPEGLossless.js"),_decoders_decodeJPEGLS_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./shared/decoders/decodeJPEGLS.js"),_decoders_decodeJPEG2000_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./shared/decoders/decodeJPEG2000.js");function decodeImageFrame(imageFrame,transferSyntax,pixelData,decodeConfig,options){var start=new Date().getTime();if("1.2.840.10008.1.2"===transferSyntax){imageFrame=Object(_decoders_decodeLittleEndian_js__WEBPACK_IMPORTED_MODULE_0__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.1"===transferSyntax){imageFrame=Object(_decoders_decodeLittleEndian_js__WEBPACK_IMPORTED_MODULE_0__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.2"===transferSyntax){imageFrame=Object(_decoders_decodeBigEndian_js__WEBPACK_IMPORTED_MODULE_1__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.1.99"===transferSyntax){imageFrame=Object(_decoders_decodeLittleEndian_js__WEBPACK_IMPORTED_MODULE_0__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.5"===transferSyntax){imageFrame=Object(_decoders_decodeRLE_js__WEBPACK_IMPORTED_MODULE_2__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.4.50"===transferSyntax){imageFrame=Object(_decoders_decodeJPEGBaseline_js__WEBPACK_IMPORTED_MODULE_3__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.4.51"===transferSyntax){imageFrame=Object(_decoders_decodeJPEGBaseline_js__WEBPACK_IMPORTED_MODULE_3__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.4.57"===transferSyntax){imageFrame=Object(_decoders_decodeJPEGLossless_js__WEBPACK_IMPORTED_MODULE_4__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.4.70"===transferSyntax){imageFrame=Object(_decoders_decodeJPEGLossless_js__WEBPACK_IMPORTED_MODULE_4__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.4.80"===transferSyntax){imageFrame=Object(_decoders_decodeJPEGLS_js__WEBPACK_IMPORTED_MODULE_5__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.4.81"===transferSyntax){imageFrame=Object(_decoders_decodeJPEGLS_js__WEBPACK_IMPORTED_MODULE_5__["default"])(imageFrame,pixelData)}else if("1.2.840.10008.1.2.4.90"===transferSyntax){imageFrame=Object(_decoders_decodeJPEG2000_js__WEBPACK_IMPORTED_MODULE_6__["default"])(imageFrame,pixelData,decodeConfig,options)}else if("1.2.840.10008.1.2.4.91"===transferSyntax){imageFrame=Object(_decoders_decodeJPEG2000_js__WEBPACK_IMPORTED_MODULE_6__["default"])(imageFrame,pixelData,decodeConfig,options)}else{throw new Error("no decoder for transfer syntax ".concat(transferSyntax))}var shouldShift=void 0!==imageFrame.pixelRepresentation&&1===imageFrame.pixelRepresentation,shift=shouldShift&&void 0!==imageFrame.bitsStored?32-imageFrame.bitsStored:void 0;if(shouldShift&&void 0!==shift){for(var i=0;i<imageFrame.pixelData.length;i++){imageFrame.pixelData[i]=imageFrame.pixelData[i]<<shift>>shift}}var end=new Date().getTime();imageFrame.decodeTimeInMS=end-start;return imageFrame}__webpack_exports__["default"]=decodeImageFrame},"./shared/decoders/decodeBigEndian.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);function swap16(val){return(255&val)<<8|255&val>>8}function decodeBigEndian(imageFrame,pixelData){if(16===imageFrame.bitsAllocated){var arrayBuffer=pixelData.buffer,offset=pixelData.byteOffset,length=pixelData.length;if(offset%2){arrayBuffer=arrayBuffer.slice(offset);offset=0}if(0===imageFrame.pixelRepresentation){imageFrame.pixelData=new Uint16Array(arrayBuffer,offset,length/2)}else{imageFrame.pixelData=new Int16Array(arrayBuffer,offset,length/2)}for(var i=0;i<imageFrame.pixelData.length;i++){imageFrame.pixelData[i]=swap16(imageFrame.pixelData[i])}}else if(8===imageFrame.bitsAllocated){imageFrame.pixelData=pixelData}return imageFrame}__webpack_exports__["default"]=decodeBigEndian},"./shared/decoders/decodeJPEG2000.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"initializeJPEG2000",function(){return initializeJPEG2000});function decodeJpx(imageFrame,pixelData){var jpxImage=new JpxImage;jpxImage.parse(pixelData);var tileCount=jpxImage.tiles.length;if(1!==tileCount){throw new Error("JPEG2000 decoder returned a tileCount of ".concat(tileCount,", when 1 is expected"))}imageFrame.columns=jpxImage.width;imageFrame.rows=jpxImage.height;imageFrame.pixelData=jpxImage.tiles[0].items;return imageFrame}var openJPEG;function decodeOpenJPEG(data,bytesPerPixel,signed){var dataPtr=openJPEG._malloc(data.length);openJPEG.writeArrayToMemory(data,dataPtr);var imagePtrPtr=openJPEG._malloc(4),imageSizePtr=openJPEG._malloc(4),imageSizeXPtr=openJPEG._malloc(4),imageSizeYPtr=openJPEG._malloc(4),imageSizeCompPtr=openJPEG._malloc(4),t0=new Date().getTime(),ret=openJPEG.ccall("jp2_decode","number",["number","number","number","number","number","number","number"],[dataPtr,data.length,imagePtrPtr,imageSizePtr,imageSizeXPtr,imageSizeYPtr,imageSizeCompPtr]);if(0!==ret){console.log("[opj_decode] decoding failed!");openJPEG._free(dataPtr);openJPEG._free(openJPEG.getValue(imagePtrPtr,"*"));openJPEG._free(imageSizeXPtr);openJPEG._free(imageSizeYPtr);openJPEG._free(imageSizePtr);openJPEG._free(imageSizeCompPtr);return}var imagePtr=openJPEG.getValue(imagePtrPtr,"*"),image={length:openJPEG.getValue(imageSizePtr,"i32"),sx:openJPEG.getValue(imageSizeXPtr,"i32"),sy:openJPEG.getValue(imageSizeYPtr,"i32"),nbChannels:openJPEG.getValue(imageSizeCompPtr,"i32"),perf_timetodecode:void 0,pixelData:void 0},length=image.sx*image.sy*image.nbChannels,src32=new Int32Array(openJPEG.HEAP32.buffer,imagePtr,length);if(1===bytesPerPixel){if(Uint8Array.from){image.pixelData=Uint8Array.from(src32)}else{image.pixelData=new Uint8Array(length);for(var i=0;i<length;i++){image.pixelData[i]=src32[i]}}}else if(signed){if(Int16Array.from){image.pixelData=Int16Array.from(src32)}else{image.pixelData=new Int16Array(length);for(var _i=0;_i<length;_i++){image.pixelData[_i]=src32[_i]}}}else if(Uint16Array.from){image.pixelData=Uint16Array.from(src32)}else{image.pixelData=new Uint16Array(length);for(var _i2=0;_i2<length;_i2++){image.pixelData[_i2]=src32[_i2]}}var t1=new Date().getTime();image.perf_timetodecode=t1-t0;openJPEG._free(dataPtr);openJPEG._free(imagePtrPtr);openJPEG._free(imagePtr);openJPEG._free(imageSizePtr);openJPEG._free(imageSizeXPtr);openJPEG._free(imageSizeYPtr);openJPEG._free(imageSizeCompPtr);return image}function decodeOpenJpeg2000(imageFrame,pixelData){var bytesPerPixel=8>=imageFrame.bitsAllocated?1:2,signed=1===imageFrame.pixelRepresentation,image=decodeOpenJPEG(pixelData,bytesPerPixel,signed);imageFrame.columns=image.sx;imageFrame.rows=image.sy;imageFrame.pixelData=image.pixelData;if(1<image.nbChannels){imageFrame.photometricInterpretation="RGB"}return imageFrame}function initializeJPEG2000(decodeConfig){if(!decodeConfig.usePDFJS){if("undefined"===typeof OpenJPEG){throw new Error("OpenJPEG decoder not loaded")}}if(!openJPEG){openJPEG=OpenJPEG();if(!openJPEG||!openJPEG._jp2_decode){throw new Error("OpenJPEG failed to initialize")}}}function decodeJPEG2000(imageFrame,pixelData,decodeConfig){var options=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};initializeJPEG2000(decodeConfig);if(options.usePDFJS||decodeConfig.usePDFJS){return decodeJpx(imageFrame,pixelData)}return decodeOpenJpeg2000(imageFrame,pixelData)}__webpack_exports__["default"]=decodeJPEG2000},"./shared/decoders/decodeJPEGBaseline.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);function decodeJPEGBaseline(imageFrame,pixelData){if("undefined"===typeof JpegImage){throw new Error("No JPEG Baseline decoder loaded")}var jpeg=new JpegImage;jpeg.parse(pixelData);jpeg.colorTransform=!1;if(8===imageFrame.bitsAllocated){imageFrame.pixelData=jpeg.getData(imageFrame.columns,imageFrame.rows);return imageFrame}else if(16===imageFrame.bitsAllocated){imageFrame.pixelData=jpeg.getData16(imageFrame.columns,imageFrame.rows);return imageFrame}}__webpack_exports__["default"]=decodeJPEGBaseline},"./shared/decoders/decodeJPEGLS.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"initializeJPEGLS",function(){return initializeJPEGLS});var charLS;function jpegLSDecode(data,isSigned){var dataPtr=charLS._malloc(data.length);charLS.writeArrayToMemory(data,dataPtr);var imagePtrPtr=charLS._malloc(4),imageSizePtr=charLS._malloc(4),widthPtr=charLS._malloc(4),heightPtr=charLS._malloc(4),bitsPerSamplePtr=charLS._malloc(4),stridePtr=charLS._malloc(4),allowedLossyErrorPtr=charLS._malloc(4),componentsPtr=charLS._malloc(4),interleaveModePtr=charLS._malloc(4),result=charLS.ccall("jpegls_decode","number",["number","number","number","number","number","number","number","number","number","number","number"],[dataPtr,data.length,imagePtrPtr,imageSizePtr,widthPtr,heightPtr,bitsPerSamplePtr,stridePtr,componentsPtr,allowedLossyErrorPtr,interleaveModePtr]),image={result:result,width:charLS.getValue(widthPtr,"i32"),height:charLS.getValue(heightPtr,"i32"),bitsPerSample:charLS.getValue(bitsPerSamplePtr,"i32"),stride:charLS.getValue(stridePtr,"i32"),components:charLS.getValue(componentsPtr,"i32"),allowedLossyError:charLS.getValue(allowedLossyErrorPtr,"i32"),interleaveMode:charLS.getValue(interleaveModePtr,"i32"),pixelData:void 0},imagePtr=charLS.getValue(imagePtrPtr,"*");if(8>=image.bitsPerSample){image.pixelData=new Uint8Array(image.width*image.height*image.components);image.pixelData.set(new Uint8Array(charLS.HEAP8.buffer,imagePtr,image.pixelData.length))}else if(isSigned){image.pixelData=new Int16Array(image.width*image.height*image.components);image.pixelData.set(new Int16Array(charLS.HEAP16.buffer,imagePtr,image.pixelData.length))}else{image.pixelData=new Uint16Array(image.width*image.height*image.components);image.pixelData.set(new Uint16Array(charLS.HEAP16.buffer,imagePtr,image.pixelData.length))}charLS._free(dataPtr);charLS._free(imagePtr);charLS._free(imagePtrPtr);charLS._free(imageSizePtr);charLS._free(widthPtr);charLS._free(heightPtr);charLS._free(bitsPerSamplePtr);charLS._free(stridePtr);charLS._free(componentsPtr);charLS._free(interleaveModePtr);return image}function initializeJPEGLS(){if("undefined"===typeof CharLS){throw new Error("No JPEG-LS decoder loaded")}if(!charLS){charLS=CharLS();if(!charLS||!charLS._jpegls_decode){throw new Error("JPEG-LS failed to initialize")}}}function decodeJPEGLS(imageFrame,pixelData){initializeJPEGLS();var image=jpegLSDecode(pixelData,1===imageFrame.pixelRepresentation);if(0!==image.result&&6!==image.result){throw new Error("JPEG-LS decoder failed to decode frame (error code ".concat(image.result,")"))}imageFrame.columns=image.width;imageFrame.rows=image.height;imageFrame.pixelData=image.pixelData;return imageFrame}__webpack_exports__["default"]=decodeJPEGLS},"./shared/decoders/decodeJPEGLossless.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);function decodeJPEGLossless(imageFrame,pixelData){if("undefined"===typeof jpeg||"undefined"===typeof jpeg.lossless||"undefined"===typeof jpeg.lossless.Decoder){throw new Error("No JPEG Lossless decoder loaded")}var byteOutput=8>=imageFrame.bitsAllocated?1:2,buffer=pixelData.buffer,decoder=new jpeg.lossless.Decoder,decompressedData=decoder.decode(buffer,pixelData.byteOffset,pixelData.length,byteOutput);if(0===imageFrame.pixelRepresentation){if(16===imageFrame.bitsAllocated){imageFrame.pixelData=new Uint16Array(decompressedData.buffer);return imageFrame}imageFrame.pixelData=new Uint8Array(decompressedData.buffer);return imageFrame}imageFrame.pixelData=new Int16Array(decompressedData.buffer);return imageFrame}__webpack_exports__["default"]=decodeJPEGLossless},"./shared/decoders/decodeLittleEndian.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);function decodeLittleEndian(imageFrame,pixelData){var arrayBuffer=pixelData.buffer,offset=pixelData.byteOffset,length=pixelData.length;if(16===imageFrame.bitsAllocated){if(offset%2){arrayBuffer=arrayBuffer.slice(offset);offset=0}if(0===imageFrame.pixelRepresentation){imageFrame.pixelData=new Uint16Array(arrayBuffer,offset,length/2)}else{imageFrame.pixelData=new Int16Array(arrayBuffer,offset,length/2)}}else if(8===imageFrame.bitsAllocated||1===imageFrame.bitsAllocated){imageFrame.pixelData=pixelData}else if(32===imageFrame.bitsAllocated){if(offset%2){arrayBuffer=arrayBuffer.slice(offset);offset=0}imageFrame.pixelData=new Float32Array(arrayBuffer,offset,length/4)}return imageFrame}__webpack_exports__["default"]=decodeLittleEndian},"./shared/decoders/decodeRLE.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);function decodeRLE(imageFrame,pixelData){if(8===imageFrame.bitsAllocated){if(imageFrame.planarConfiguration){return decode8Planar(imageFrame,pixelData)}return decode8(imageFrame,pixelData)}else if(16===imageFrame.bitsAllocated){return decode16(imageFrame,pixelData)}throw new Error("unsupported pixel format for RLE")}function decode8(imageFrame,pixelData){for(var frameData=pixelData,frameSize=imageFrame.rows*imageFrame.columns,outFrame=new ArrayBuffer(frameSize*imageFrame.samplesPerPixel),header=new DataView(frameData.buffer,frameData.byteOffset),data=new Int8Array(frameData.buffer,frameData.byteOffset),out=new Int8Array(outFrame),outIndex=0,numSegments=header.getInt32(0,!0),s=0;s<numSegments;++s){outIndex=s;var inIndex=header.getInt32(4*(s+1),!0),maxIndex=header.getInt32(4*(s+2),!0);if(0===maxIndex){maxIndex=frameData.length}var endOfSegment=frameSize*numSegments;while(inIndex<maxIndex){var n=data[inIndex++];if(0<=n&&127>=n){for(var i=0;i<n+1&&outIndex<endOfSegment;++i){out[outIndex]=data[inIndex++];outIndex+=imageFrame.samplesPerPixel}}else if(-1>=n&&-127<=n){for(var value=data[inIndex++],j=0;j<-n+1&&outIndex<endOfSegment;++j){out[outIndex]=value;outIndex+=imageFrame.samplesPerPixel}}}}imageFrame.pixelData=new Uint8Array(outFrame);return imageFrame}function decode8Planar(imageFrame,pixelData){for(var frameData=pixelData,frameSize=imageFrame.rows*imageFrame.columns,outFrame=new ArrayBuffer(frameSize*imageFrame.samplesPerPixel),header=new DataView(frameData.buffer,frameData.byteOffset),data=new Int8Array(frameData.buffer,frameData.byteOffset),out=new Int8Array(outFrame),outIndex=0,numSegments=header.getInt32(0,!0),s=0;s<numSegments;++s){outIndex=s*frameSize;var inIndex=header.getInt32(4*(s+1),!0),maxIndex=header.getInt32(4*(s+2),!0);if(0===maxIndex){maxIndex=frameData.length}var endOfSegment=frameSize*numSegments;while(inIndex<maxIndex){var n=data[inIndex++];if(0<=n&&127>=n){for(var i=0;i<n+1&&outIndex<endOfSegment;++i){out[outIndex]=data[inIndex++];outIndex++}}else if(-1>=n&&-127<=n){for(var value=data[inIndex++],j=0;j<-n+1&&outIndex<endOfSegment;++j){out[outIndex]=value;outIndex++}}}}imageFrame.pixelData=new Uint8Array(outFrame);return imageFrame}function decode16(imageFrame,pixelData){for(var frameData=pixelData,frameSize=imageFrame.rows*imageFrame.columns,outFrame=new ArrayBuffer(2*(frameSize*imageFrame.samplesPerPixel)),header=new DataView(frameData.buffer,frameData.byteOffset),data=new Int8Array(frameData.buffer,frameData.byteOffset),out=new Int8Array(outFrame),numSegments=header.getInt32(0,!0),s=0;s<numSegments;++s){var outIndex=0,highByte=0===s?1:0,inIndex=header.getInt32(4*(s+1),!0),maxIndex=header.getInt32(4*(s+2),!0);if(0===maxIndex){maxIndex=frameData.length}while(inIndex<maxIndex){var n=data[inIndex++];if(0<=n&&127>=n){for(var i=0;i<n+1&&outIndex<frameSize;++i){out[2*outIndex+highByte]=data[inIndex++];outIndex++}}else if(-1>=n&&-127<=n){for(var value=data[inIndex++],j=0;j<-n+1&&outIndex<frameSize;++j){out[2*outIndex+highByte]=value;outIndex++}}}}if(0===imageFrame.pixelRepresentation){imageFrame.pixelData=new Uint16Array(outFrame)}else{imageFrame.pixelData=new Int16Array(outFrame)}return imageFrame}__webpack_exports__["default"]=decodeRLE},"./shared/getMinMax.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);function getMinMax(storedPixelData){for(var min=storedPixelData[0],max=storedPixelData[0],storedPixel,numPixels=storedPixelData.length,index=1;index<numPixels;index++){storedPixel=storedPixelData[index];min=Math.min(min,storedPixel);max=Math.max(max,storedPixel)}return{min:min,max:max}}__webpack_exports__["default"]=getMinMax},"./version.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]="2.2.2"},"./webWorker/decodeTask/decodeTask.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _shared_decoders_decodeJPEG2000_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./shared/decoders/decodeJPEG2000.js"),_shared_decoders_decodeJPEGLS_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./shared/decoders/decodeJPEGLS.js"),_shared_calculateMinMax_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./shared/calculateMinMax.js"),_shared_decodeImageFrame_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/decodeImageFrame.js"),codecsLoaded=!1,decodeConfig;function loadCodecs(config){if(codecsLoaded){return}self.importScripts(config.decodeTask.codecsPath);codecsLoaded=!0;if(config.decodeTask.initializeCodecsOnStartup){Object(_shared_decoders_decodeJPEG2000_js__WEBPACK_IMPORTED_MODULE_0__.initializeJPEG2000)(config.decodeTask);Object(_shared_decoders_decodeJPEGLS_js__WEBPACK_IMPORTED_MODULE_1__.initializeJPEGLS)(config.decodeTask)}}function initialize(config){decodeConfig=config;if(config.decodeTask.loadCodecsOnStartup){loadCodecs(config)}}function handler(data,doneCallback){loadCodecs(decodeConfig);var strict=decodeConfig&&decodeConfig.decodeTask&&decodeConfig.decodeTask.strict,imageFrame=data.data.imageFrame,pixelData=new Uint8Array(data.data.pixelData);Object(_shared_decodeImageFrame_js__WEBPACK_IMPORTED_MODULE_3__["default"])(imageFrame,data.data.transferSyntax,pixelData,decodeConfig.decodeTask,data.data.options);if(!imageFrame.pixelData){throw new Error("decodeTask: imageFrame.pixelData is undefined after decoding")}Object(_shared_calculateMinMax_js__WEBPACK_IMPORTED_MODULE_2__["default"])(imageFrame,strict);imageFrame.pixelData=imageFrame.pixelData.buffer;doneCallback(imageFrame,[imageFrame.pixelData])}__webpack_exports__["default"]={taskType:"decodeTask",handler:handler,initialize:initialize}},"./webWorker/index.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _webWorker_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./webWorker/webWorker.js");__webpack_require__.d(__webpack_exports__,"registerTaskHandler",function(){return _webWorker_js__WEBPACK_IMPORTED_MODULE_0__.registerTaskHandler});var _decodeTask_decodeTask_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./webWorker/decodeTask/decodeTask.js"),_version_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./version.js");__webpack_require__.d(__webpack_exports__,"version",function(){return _version_js__WEBPACK_IMPORTED_MODULE_2__["default"]});Object(_webWorker_js__WEBPACK_IMPORTED_MODULE_0__.registerTaskHandler)(_decodeTask_decodeTask_js__WEBPACK_IMPORTED_MODULE_1__["default"]);var cornerstoneWADOImageLoaderWebWorker={registerTaskHandler:_webWorker_js__WEBPACK_IMPORTED_MODULE_0__.registerTaskHandler,version:_version_js__WEBPACK_IMPORTED_MODULE_2__["default"]};__webpack_exports__["default"]=cornerstoneWADOImageLoaderWebWorker},"./webWorker/webWorker.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"registerTaskHandler",function(){return registerTaskHandler});var taskHandlers={},initialized=!1,config;function initialize(data){if(initialized){return}config=data.config;if(data.config.webWorkerTaskPaths){for(var i=0;i<data.config.webWorkerTaskPaths.length;i++){self.importScripts(data.config.webWorkerTaskPaths[i])}}Object.keys(taskHandlers).forEach(function(key){taskHandlers[key].initialize(config.taskConfiguration)});self.postMessage({taskType:"initialize",status:"success",result:{},workerIndex:data.workerIndex});initialized=!0}function registerTaskHandler(taskHandler){if(taskHandlers[taskHandler.taskType]){console.log("attempt to register duplicate task handler \"",taskHandler.taskType,"\"");return!1}taskHandlers[taskHandler.taskType]=taskHandler;if(initialized){taskHandler.initialize(config.taskConfiguration)}}function loadWebWorkerTask(data){config=data.config;self.importScripts(data.sourcePath)}self.onmessage=function(msg){if("initialize"===msg.data.taskType){initialize(msg.data);return}if("loadWebWorkerTask"===msg.data.taskType){loadWebWorkerTask(msg.data);return}if(taskHandlers[msg.data.taskType]){taskHandlers[msg.data.taskType].handler(msg.data,function(result,transferList){self.postMessage({taskType:msg.data.taskType,status:"success",result:result,workerIndex:msg.data.workerIndex},transferList)});return}console.log("no task handler for ",msg.data.taskType);console.log(taskHandlers);self.postMessage({taskType:msg.data.taskType,status:"failed - no task handler registered",workerIndex:msg.data.workerIndex})}}})});