(function webpackUniversalModuleDefinition(root,factory){if("object"===typeof exports&&"object"===typeof module)module.exports=factory();else if("function"===typeof define&&define.amd)define("cornerstone-math",[],factory);else if("object"===typeof exports)exports["cornerstone-math"]=factory();else root.cornerstoneMath=factory()})(window,function(){var _Mathmin=Math.min,_Mathsqrt=Math.sqrt;return function(modules){function hotDisposeChunk(chunkId){delete installedChunks[chunkId]}var parentHotUpdateCallback=window.webpackHotUpdate;window.webpackHotUpdate=function webpackHotUpdateCallback(chunkId,moreModules){hotAddUpdateChunk(chunkId,moreModules);if(parentHotUpdateCallback)parentHotUpdateCallback(chunkId,moreModules)};function hotDownloadUpdateChunk(chunkId){var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.charset="utf-8";script.src=__webpack_require__.p+""+chunkId+"."+hotCurrentHash+".hot-update.js";;head.appendChild(script)}function hotDownloadManifest(requestTimeout){requestTimeout=requestTimeout||1e4;return new Promise(function(resolve,reject){if("undefined"===typeof XMLHttpRequest)return reject(new Error("No browser support"));try{var request=new XMLHttpRequest,requestPath=__webpack_require__.p+""+hotCurrentHash+".hot-update.json";request.open("GET",requestPath,!0);request.timeout=requestTimeout;request.send(null)}catch(err){return reject(err)}request.onreadystatechange=function(){if(4!==request.readyState)return;if(0===request.status){reject(new Error("Manifest request to "+requestPath+" timed out."))}else if(404===request.status){resolve()}else if(200!==request.status&&304!==request.status){reject(new Error("Manifest request to "+requestPath+" failed."))}else{try{var update=JSON.parse(request.responseText)}catch(e){reject(e);return}resolve(update)}}})}var hotApplyOnUpdate=!0,hotCurrentHash="d13a3cb6626db8153e94",hotRequestTimeout=1e4,hotCurrentModuleData={},hotCurrentChildModule,hotCurrentParents=[],hotCurrentParentsTemp=[];function hotCreateRequire(moduleId){var me=installedModules[moduleId];if(!me)return __webpack_require__;var fn=function(request){if(me.hot.active){if(installedModules[request]){if(-1===installedModules[request].parents.indexOf(moduleId))installedModules[request].parents.push(moduleId)}else{hotCurrentParents=[moduleId];hotCurrentChildModule=request}if(-1===me.children.indexOf(request))me.children.push(request)}else{console.warn("[HMR] unexpected require("+request+") from disposed module "+moduleId);hotCurrentParents=[]}return __webpack_require__(request)},ObjectFactory=function ObjectFactory(name){return{configurable:!0,enumerable:!0,get:function(){return __webpack_require__[name]},set:function(value){__webpack_require__[name]=value}}};for(var name in __webpack_require__){if(Object.prototype.hasOwnProperty.call(__webpack_require__,name)&&"e"!==name){Object.defineProperty(fn,name,ObjectFactory(name))}}fn.e=function(chunkId){if("ready"===hotStatus)hotSetStatus("prepare");hotChunksLoading++;return __webpack_require__.e(chunkId).then(finishChunkLoading,function(err){finishChunkLoading();throw err});function finishChunkLoading(){hotChunksLoading--;if("prepare"===hotStatus){if(!hotWaitingFilesMap[chunkId]){hotEnsureUpdateChunk(chunkId)}if(0===hotChunksLoading&&0===hotWaitingFiles){hotUpdateDownloaded()}}}};return fn}function hotCreateModule(moduleId){var hot={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:hotCurrentChildModule!==moduleId,active:!0,accept:function(dep,callback){if("undefined"===typeof dep)hot._selfAccepted=!0;else if("function"===typeof dep)hot._selfAccepted=dep;else if("object"===typeof dep)for(var i=0;i<dep.length;i++)hot._acceptedDependencies[dep[i]]=callback||function(){};else hot._acceptedDependencies[dep]=callback||function(){}},decline:function(dep){if("undefined"===typeof dep)hot._selfDeclined=!0;else if("object"===typeof dep)for(var i=0;i<dep.length;i++)hot._declinedDependencies[dep[i]]=!0;else hot._declinedDependencies[dep]=!0},dispose:function(callback){hot._disposeHandlers.push(callback)},addDisposeHandler:function(callback){hot._disposeHandlers.push(callback)},removeDisposeHandler:function(callback){var idx=hot._disposeHandlers.indexOf(callback);if(0<=idx)hot._disposeHandlers.splice(idx,1)},check:hotCheck,apply:hotApply,status:function(l){if(!l)return hotStatus;hotStatusHandlers.push(l)},addStatusHandler:function(l){hotStatusHandlers.push(l)},removeStatusHandler:function(l){var idx=hotStatusHandlers.indexOf(l);if(0<=idx)hotStatusHandlers.splice(idx,1)},data:hotCurrentModuleData[moduleId]};hotCurrentChildModule=void 0;return hot}var hotStatusHandlers=[],hotStatus="idle";function hotSetStatus(newStatus){hotStatus=newStatus;for(var i=0;i<hotStatusHandlers.length;i++)hotStatusHandlers[i].call(null,newStatus)}var hotWaitingFiles=0,hotChunksLoading=0,hotWaitingFilesMap={},hotRequestedFilesMap={},hotAvailableFilesMap={},hotDeferred,hotUpdate,hotUpdateNewHash;function toModuleId(id){var isNumber=+id+""===id;return isNumber?+id:id}function hotCheck(apply){if("idle"!==hotStatus)throw new Error("check() is only allowed in idle status");hotApplyOnUpdate=apply;hotSetStatus("check");return hotDownloadManifest(hotRequestTimeout).then(function(update){if(!update){hotSetStatus("idle");return null}hotRequestedFilesMap={};hotWaitingFilesMap={};hotAvailableFilesMap=update.c;hotUpdateNewHash=update.h;hotSetStatus("prepare");var promise=new Promise(function(resolve,reject){hotDeferred={resolve:resolve,reject:reject}});hotUpdate={};var chunkId="cornerstoneMath";{hotEnsureUpdateChunk(chunkId)}if("prepare"===hotStatus&&0===hotChunksLoading&&0===hotWaitingFiles){hotUpdateDownloaded()}return promise})}function hotAddUpdateChunk(chunkId,moreModules){if(!hotAvailableFilesMap[chunkId]||!hotRequestedFilesMap[chunkId])return;hotRequestedFilesMap[chunkId]=!1;for(var moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){hotUpdate[moduleId]=moreModules[moduleId]}}if(0===--hotWaitingFiles&&0===hotChunksLoading){hotUpdateDownloaded()}}function hotEnsureUpdateChunk(chunkId){if(!hotAvailableFilesMap[chunkId]){hotWaitingFilesMap[chunkId]=!0}else{hotRequestedFilesMap[chunkId]=!0;hotWaitingFiles++;hotDownloadUpdateChunk(chunkId)}}function hotUpdateDownloaded(){hotSetStatus("ready");var deferred=hotDeferred;hotDeferred=null;if(!deferred)return;if(hotApplyOnUpdate){Promise.resolve().then(function(){return hotApply(hotApplyOnUpdate)}).then(function(result){deferred.resolve(result)},function(err){deferred.reject(err)})}else{var outdatedModules=[];for(var id in hotUpdate){if(Object.prototype.hasOwnProperty.call(hotUpdate,id)){outdatedModules.push(toModuleId(id))}}deferred.resolve(outdatedModules)}}function hotApply(options){if("ready"!==hotStatus)throw new Error("apply() is only allowed in ready status");options=options||{};var cb,i,j,module,moduleId;function getAffectedStuff(updateModuleId){var outdatedModules=[updateModuleId],outdatedDependencies={},queue=outdatedModules.slice().map(function(id){return{chain:[id],id:id}});while(0<queue.length){var queueItem=queue.pop(),moduleId=queueItem.id,chain=queueItem.chain;module=installedModules[moduleId];if(!module||module.hot._selfAccepted)continue;if(module.hot._selfDeclined){return{type:"self-declined",chain:chain,moduleId:moduleId}}if(module.hot._main){return{type:"unaccepted",chain:chain,moduleId:moduleId}}for(var i=0;i<module.parents.length;i++){var parentId=module.parents[i],parent=installedModules[parentId];if(!parent)continue;if(parent.hot._declinedDependencies[moduleId]){return{type:"declined",chain:chain.concat([parentId]),moduleId:moduleId,parentId:parentId}}if(-1!==outdatedModules.indexOf(parentId))continue;if(parent.hot._acceptedDependencies[moduleId]){if(!outdatedDependencies[parentId])outdatedDependencies[parentId]=[];addAllToSet(outdatedDependencies[parentId],[moduleId]);continue}delete outdatedDependencies[parentId];outdatedModules.push(parentId);queue.push({chain:chain.concat([parentId]),id:parentId})}}return{type:"accepted",moduleId:updateModuleId,outdatedModules:outdatedModules,outdatedDependencies:outdatedDependencies}}function addAllToSet(a,b){for(var i=0,item;i<b.length;i++){item=b[i];if(-1===a.indexOf(item))a.push(item)}}var outdatedDependencies={},outdatedModules=[],appliedUpdate={},warnUnexpectedRequire=function warnUnexpectedRequire(){console.warn("[HMR] unexpected require("+result.moduleId+") to disposed module")};for(var id in hotUpdate){if(Object.prototype.hasOwnProperty.call(hotUpdate,id)){moduleId=toModuleId(id);var result;if(hotUpdate[id]){result=getAffectedStuff(moduleId)}else{result={type:"disposed",moduleId:id}}var abortError=!1,doApply=!1,doDispose=!1,chainInfo="";if(result.chain){chainInfo="\nUpdate propagation: "+result.chain.join(" -> ")}switch(result.type){case"self-declined":if(options.onDeclined)options.onDeclined(result);if(!options.ignoreDeclined)abortError=new Error("Aborted because of self decline: "+result.moduleId+chainInfo);break;case"declined":if(options.onDeclined)options.onDeclined(result);if(!options.ignoreDeclined)abortError=new Error("Aborted because of declined dependency: "+result.moduleId+" in "+result.parentId+chainInfo);break;case"unaccepted":if(options.onUnaccepted)options.onUnaccepted(result);if(!options.ignoreUnaccepted)abortError=new Error("Aborted because "+moduleId+" is not accepted"+chainInfo);break;case"accepted":if(options.onAccepted)options.onAccepted(result);doApply=!0;break;case"disposed":if(options.onDisposed)options.onDisposed(result);doDispose=!0;break;default:throw new Error("Unexception type "+result.type);}if(abortError){hotSetStatus("abort");return Promise.reject(abortError)}if(doApply){appliedUpdate[moduleId]=hotUpdate[moduleId];addAllToSet(outdatedModules,result.outdatedModules);for(moduleId in result.outdatedDependencies){if(Object.prototype.hasOwnProperty.call(result.outdatedDependencies,moduleId)){if(!outdatedDependencies[moduleId])outdatedDependencies[moduleId]=[];addAllToSet(outdatedDependencies[moduleId],result.outdatedDependencies[moduleId])}}}if(doDispose){addAllToSet(outdatedModules,[result.moduleId]);appliedUpdate[moduleId]=warnUnexpectedRequire}}}var outdatedSelfAcceptedModules=[];for(i=0;i<outdatedModules.length;i++){moduleId=outdatedModules[i];if(installedModules[moduleId]&&installedModules[moduleId].hot._selfAccepted)outdatedSelfAcceptedModules.push({module:moduleId,errorHandler:installedModules[moduleId].hot._selfAccepted})}hotSetStatus("dispose");Object.keys(hotAvailableFilesMap).forEach(function(chunkId){if(!1===hotAvailableFilesMap[chunkId]){hotDisposeChunk(chunkId)}});var idx,queue=outdatedModules.slice();while(0<queue.length){moduleId=queue.pop();module=installedModules[moduleId];if(!module)continue;var data={},disposeHandlers=module.hot._disposeHandlers;for(j=0;j<disposeHandlers.length;j++){cb=disposeHandlers[j];cb(data)}hotCurrentModuleData[moduleId]=data;module.hot.active=!1;delete installedModules[moduleId];delete outdatedDependencies[moduleId];for(j=0;j<module.children.length;j++){var child=installedModules[module.children[j]];if(!child)continue;idx=child.parents.indexOf(moduleId);if(0<=idx){child.parents.splice(idx,1)}}}var dependency,moduleOutdatedDependencies;for(moduleId in outdatedDependencies){if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId)){module=installedModules[moduleId];if(module){moduleOutdatedDependencies=outdatedDependencies[moduleId];for(j=0;j<moduleOutdatedDependencies.length;j++){dependency=moduleOutdatedDependencies[j];idx=module.children.indexOf(dependency);if(0<=idx)module.children.splice(idx,1)}}}}hotSetStatus("apply");hotCurrentHash=hotUpdateNewHash;for(moduleId in appliedUpdate){if(Object.prototype.hasOwnProperty.call(appliedUpdate,moduleId)){modules[moduleId]=appliedUpdate[moduleId]}}var error=null;for(moduleId in outdatedDependencies){if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId)){module=installedModules[moduleId];if(module){moduleOutdatedDependencies=outdatedDependencies[moduleId];var callbacks=[];for(i=0;i<moduleOutdatedDependencies.length;i++){dependency=moduleOutdatedDependencies[i];cb=module.hot._acceptedDependencies[dependency];if(cb){if(-1!==callbacks.indexOf(cb))continue;callbacks.push(cb)}}for(i=0;i<callbacks.length;i++){cb=callbacks[i];try{cb(moduleOutdatedDependencies)}catch(err){if(options.onErrored){options.onErrored({type:"accept-errored",moduleId:moduleId,dependencyId:moduleOutdatedDependencies[i],error:err})}if(!options.ignoreErrored){if(!error)error=err}}}}}}for(i=0;i<outdatedSelfAcceptedModules.length;i++){var item=outdatedSelfAcceptedModules[i];moduleId=item.module;hotCurrentParents=[moduleId];try{__webpack_require__(moduleId)}catch(err){if("function"===typeof item.errorHandler){try{item.errorHandler(err)}catch(err2){if(options.onErrored){options.onErrored({type:"self-accept-error-handler-errored",moduleId:moduleId,error:err2,originalError:err})}if(!options.ignoreErrored){if(!error)error=err2}if(!error)error=err}}else{if(options.onErrored){options.onErrored({type:"self-accept-errored",moduleId:moduleId,error:err})}if(!options.ignoreErrored){if(!error)error=err}}}}if(error){hotSetStatus("fail");return Promise.reject(error)}hotSetStatus("idle");return new Promise(function(resolve){resolve(outdatedModules)})}var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{},hot:hotCreateModule(moduleId),parents:(hotCurrentParentsTemp=hotCurrentParents,hotCurrentParents=[],hotCurrentParentsTemp),children:[]};modules[moduleId].call(module.exports,module,module.exports,hotCreateRequire(moduleId));module.l=!0;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})}};__webpack_require__.r=function(exports){Object.defineProperty(exports,"__esModule",{value:!0})};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.h=function(){return hotCurrentHash};return hotCreateRequire("./index.js")(__webpack_require__.s="./index.js")}({"./Line3.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),_vector=__webpack_require__("./vector3.js"),_vector2=_interopRequireDefault(_vector),_math=__webpack_require__("./math.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Line3=function(){function Line3(start,end){_classCallCheck(this,Line3);this.start=void 0!==start?start:new _vector2.default;this.end=void 0!==end?end:new _vector2.default}_createClass(Line3,[{key:"set",value:function set(start,end){this.start.copy(start);this.end.copy(end);return this}},{key:"copy",value:function copy(line){this.start.copy(line.start);this.end.copy(line.end);return this}},{key:"center",value:function center(optionalTarget){var result=optionalTarget||new _vector2.default;return result.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function delta(optionalTarget){var result=optionalTarget||new _vector2.default;return result.subVectors(this.end,this.start)}},{key:"distanceSq",value:function distanceSq(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function distance(){return this.start.distanceTo(this.end)}},{key:"at",value:function at(t,optionalTarget){var result=optionalTarget||new _vector2.default;return this.delta(result).multiplyScalar(t).add(this.start)}},{key:"closestPointToPointParameter",value:function closestPointToPointParameter(point,clampToLine){var startP=new _vector2.default,startEnd=new _vector2.default;startP.subVectors(point,this.start);startEnd.subVectors(this.end,this.start);var startEnd2=startEnd.dot(startEnd),startEnd_startP=startEnd.dot(startP),t=startEnd_startP/startEnd2;if(clampToLine){t=(0,_math.clamp)(t,0,1)}return t}},{key:"closestPointToPoint",value:function closestPointToPoint(point,clampToLine,optionalTarget){var t=this.closestPointToPointParameter(point,clampToLine),result=optionalTarget||new _vector2.default;return this.delta(result).multiplyScalar(t).add(this.start)}},{key:"applyMatrix4",value:function applyMatrix4(matrix){this.start.applyMatrix4(matrix);this.end.applyMatrix4(matrix);return this}},{key:"equals",value:function equals(line){return line.start.equals(this.start)&&line.end.equals(this.end)}},{key:"clone",value:function clone(){return new Line3().copy(this)}},{key:"intersectLine",value:function intersectLine(line){var da=this.end.clone().sub(this.start),db=line.end.clone().sub(line.start),dc=line.start.clone().sub(this.start),daCrossDb=da.clone().cross(db),dcCrossDb=dc.clone().cross(db);if(0===dc.dot(da)){return}var s=dcCrossDb.dot(daCrossDb)/daCrossDb.lengthSq();if(1<s||isNaN(s)){return}var intersection=this.start.clone().add(da.clone().multiplyScalar(s)),distanceTest=intersection.clone().sub(line.start).lengthSq()+intersection.clone().sub(line.end).lengthSq();if(distanceTest<=line.distanceSq()){return intersection}return}}]);return Line3}();exports.default=Line3},"./index.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Vector3=exports.rect=exports.quaternion=exports.point=exports.Plane=exports.Matrix4=exports.sign=exports.radToDeg=exports.degToRad=exports.clamp=exports.lineSegment=exports.Line3=void 0;var _Line=__webpack_require__("./Line3.js"),_Line2=_interopRequireDefault(_Line),_lineSegment=__webpack_require__("./lineSegment.js"),_lineSegment2=_interopRequireDefault(_lineSegment),_math=__webpack_require__("./math.js"),_matrix=__webpack_require__("./matrix4.js"),_matrix2=_interopRequireDefault(_matrix),_plane=__webpack_require__("./plane.js"),_plane2=_interopRequireDefault(_plane),_point=__webpack_require__("./point.js"),_point2=_interopRequireDefault(_point),_quaternion=__webpack_require__("./quaternion.js"),_quaternion2=_interopRequireDefault(_quaternion),_rect=__webpack_require__("./rect.js"),_rect2=_interopRequireDefault(_rect),_vector=__webpack_require__("./vector3.js"),_vector2=_interopRequireDefault(_vector);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var cornerstoneMath={Line3:_Line2.default,lineSegment:_lineSegment2.default,clamp:_math.clamp,degToRad:_math.degToRad,radToDeg:_math.radToDeg,sign:_math.sign,Matrix4:_matrix2.default,Plane:_plane2.default,point:_point2.default,quaternion:_quaternion2.default,rect:_rect2.default,Vector3:_vector2.default};exports.Line3=_Line2.default;exports.lineSegment=_lineSegment2.default;exports.clamp=_math.clamp;exports.degToRad=_math.degToRad;exports.radToDeg=_math.radToDeg;exports.sign=_math.sign;exports.Matrix4=_matrix2.default;exports.Plane=_plane2.default;exports.point=_point2.default;exports.quaternion=_quaternion2.default;exports.rect=_rect2.default;exports.Vector3=_vector2.default;exports.default=cornerstoneMath},"./lineSegment.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _math=__webpack_require__("./math.js");function sqr(x){return x*x}function dist2(v,w){return sqr(v.x-w.x)+sqr(v.y-w.y)}function distanceToPointSquared(lineSegment,point){var l2=dist2(lineSegment.start,lineSegment.end);if(0===l2){return dist2(point,lineSegment.start)}var t=((point.x-lineSegment.start.x)*(lineSegment.end.x-lineSegment.start.x)+(point.y-lineSegment.start.y)*(lineSegment.end.y-lineSegment.start.y))/l2;if(0>t){return dist2(point,lineSegment.start)}if(1<t){return dist2(point,lineSegment.end)}var pt={x:lineSegment.start.x+t*(lineSegment.end.x-lineSegment.start.x),y:lineSegment.start.y+t*(lineSegment.end.y-lineSegment.start.y)};return dist2(point,pt)}function distanceToPoint(lineSegment,point){return _Mathsqrt(distanceToPointSquared(lineSegment,point))}function intersectLine(lineSegment1,lineSegment2){var intersectionPoint={},x1=lineSegment1.start.x,y1=lineSegment1.start.y,x2=lineSegment1.end.x,y2=lineSegment1.end.y,x3=lineSegment2.start.x,y3=lineSegment2.start.y,x4=lineSegment2.end.x,y4=lineSegment2.end.y,a1,a2,b1,b2,c1,c2,r1,r2,r3,r4,denom,num;a1=y2-y1;b1=x1-x2;c1=x2*y1-x1*y2;r3=a1*x3+b1*y3+c1;r4=a1*x4+b1*y4+c1;if(0!==r3&&0!==r4&&(0,_math.sign)(r3)===(0,_math.sign)(r4)){return}a2=y4-y3;b2=x3-x4;c2=x4*y3-x3*y4;r1=a2*x1+b2*y1+c2;r2=a2*x2+b2*y2+c2;if(0!==r1&&0!==r2&&(0,_math.sign)(r1)===(0,_math.sign)(r2)){return}denom=a1*b2-a2*b1;num=b1*c2-b2*c1;var x=parseFloat(num/denom);num=a2*c1-a1*c2;var y=parseFloat(num/denom);intersectionPoint.x=x;intersectionPoint.y=y;return intersectionPoint}var lineSegment={distanceToPoint:distanceToPoint,intersectLine:intersectLine};exports.default=lineSegment},"./math.js":function(module,exports,__webpack_require__){"use strict";var _MathPI=Math.PI;Object.defineProperty(exports,"__esModule",{value:!0});function clamp(x,a,b){return x<a?a:x>b?b:x}function degToRad(degrees){var degreeToRadiansFactor=_MathPI/180;return degrees*degreeToRadiansFactor}function radToDeg(radians){var radianToDegreesFactor=180/_MathPI;return radians*radianToDegreesFactor}function sign(x){return"number"===typeof x?x?0>x?-1:1:x===x?0:NaN:NaN}exports.clamp=clamp;exports.degToRad=degToRad;exports.radToDeg=radToDeg;exports.sign=sign},"./matrix4.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _vector=__webpack_require__("./vector3.js"),_vector2=_interopRequireDefault(_vector);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Matrix4=function Matrix4(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){this.elements=new Float32Array(16);var te=this.elements;te[0]=void 0!==n11?n11:1;te[4]=n12||0;te[8]=n13||0;te[12]=n14||0;te[1]=n21||0;te[5]=void 0!==n22?n22:1;te[9]=n23||0;te[13]=n24||0;te[2]=n31||0;te[6]=n32||0;te[10]=void 0!==n33?n33:1;te[14]=n34||0;te[3]=n41||0;te[7]=n42||0;te[11]=n43||0;te[15]=void 0!==n44?n44:1};Matrix4.prototype.makeRotationFromQuaternion=function(q){var te=this.elements,x=q.x,y=q.y,z=q.z,w=q.w,x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;te[0]=1-(yy+zz);te[4]=xy-wz;te[8]=xz+wy;te[1]=xy+wz;te[5]=1-(xx+zz);te[9]=yz-wx;te[2]=xz-wy;te[6]=yz+wx;te[10]=1-(xx+yy);te[3]=0;te[7]=0;te[11]=0;te[12]=0;te[13]=0;te[14]=0;te[15]=1;return this};Matrix4.prototype.multiplyMatrices=function(a,b){var ae=a.elements,be=b.elements,te=this.elements,a11=ae[0],a12=ae[4],a13=ae[8],a14=ae[12],a21=ae[1],a22=ae[5],a23=ae[9],a24=ae[13],a31=ae[2],a32=ae[6],a33=ae[10],a34=ae[14],a41=ae[3],a42=ae[7],a43=ae[11],a44=ae[15],b11=be[0],b12=be[4],b13=be[8],b14=be[12],b21=be[1],b22=be[5],b23=be[9],b24=be[13],b31=be[2],b32=be[6],b33=be[10],b34=be[14],b41=be[3],b42=be[7],b43=be[11],b44=be[15];te[0]=a11*b11+a12*b21+a13*b31+a14*b41;te[4]=a11*b12+a12*b22+a13*b32+a14*b42;te[8]=a11*b13+a12*b23+a13*b33+a14*b43;te[12]=a11*b14+a12*b24+a13*b34+a14*b44;te[1]=a21*b11+a22*b21+a23*b31+a24*b41;te[5]=a21*b12+a22*b22+a23*b32+a24*b42;te[9]=a21*b13+a22*b23+a23*b33+a24*b43;te[13]=a21*b14+a22*b24+a23*b34+a24*b44;te[2]=a31*b11+a32*b21+a33*b31+a34*b41;te[6]=a31*b12+a32*b22+a33*b32+a34*b42;te[10]=a31*b13+a32*b23+a33*b33+a34*b43;te[14]=a31*b14+a32*b24+a33*b34+a34*b44;te[3]=a41*b11+a42*b21+a43*b31+a44*b41;te[7]=a41*b12+a42*b22+a43*b32+a44*b42;te[11]=a41*b13+a42*b23+a43*b33+a44*b43;te[15]=a41*b14+a42*b24+a43*b34+a44*b44;return this};Matrix4.prototype.multiply=function(m,n){if(void 0!==n){console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(m,n)}return this.multiplyMatrices(this,m)};Matrix4.prototype.getInverse=function(m,throwOnInvertible){var te=this.elements,me=m.elements,n11=me[0],n12=me[4],n13=me[8],n14=me[12],n21=me[1],n22=me[5],n23=me[9],n24=me[13],n31=me[2],n32=me[6],n33=me[10],n34=me[14],n41=me[3],n42=me[7],n43=me[11],n44=me[15];te[0]=n23*n34*n42-n24*n33*n42+n24*n32*n43-n22*n34*n43-n23*n32*n44+n22*n33*n44;te[4]=n14*n33*n42-n13*n34*n42-n14*n32*n43+n12*n34*n43+n13*n32*n44-n12*n33*n44;te[8]=n13*n24*n42-n14*n23*n42+n14*n22*n43-n12*n24*n43-n13*n22*n44+n12*n23*n44;te[12]=n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34;te[1]=n24*n33*n41-n23*n34*n41-n24*n31*n43+n21*n34*n43+n23*n31*n44-n21*n33*n44;te[5]=n13*n34*n41-n14*n33*n41+n14*n31*n43-n11*n34*n43-n13*n31*n44+n11*n33*n44;te[9]=n14*n23*n41-n13*n24*n41-n14*n21*n43+n11*n24*n43+n13*n21*n44-n11*n23*n44;te[13]=n13*n24*n31-n14*n23*n31+n14*n21*n33-n11*n24*n33-n13*n21*n34+n11*n23*n34;te[2]=n22*n34*n41-n24*n32*n41+n24*n31*n42-n21*n34*n42-n22*n31*n44+n21*n32*n44;te[6]=n14*n32*n41-n12*n34*n41-n14*n31*n42+n11*n34*n42+n12*n31*n44-n11*n32*n44;te[10]=n12*n24*n41-n14*n22*n41+n14*n21*n42-n11*n24*n42-n12*n21*n44+n11*n22*n44;te[14]=n14*n22*n31-n12*n24*n31-n14*n21*n32+n11*n24*n32+n12*n21*n34-n11*n22*n34;te[3]=n23*n32*n41-n22*n33*n41-n23*n31*n42+n21*n33*n42+n22*n31*n43-n21*n32*n43;te[7]=n12*n33*n41-n13*n32*n41+n13*n31*n42-n11*n33*n42-n12*n31*n43+n11*n32*n43;te[11]=n13*n22*n41-n12*n23*n41-n13*n21*n42+n11*n23*n42+n12*n21*n43-n11*n22*n43;te[15]=n12*n23*n31-n13*n22*n31+n13*n21*n32-n11*n23*n32-n12*n21*n33+n11*n22*n33;var det=n11*te[0]+n21*te[4]+n31*te[8]+n41*te[12];if(0===det){var msg="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(throwOnInvertible||!1){throw new Error(msg)}else{console.warn(msg)}this.identity();return this}this.multiplyScalar(1/det);return this};Matrix4.prototype.applyToVector3Array=function(){var v1=new _vector2.default;return function(array,offset,length){if(void 0===offset){offset=0}if(void 0===length){length=array.length}for(var i=0,j=offset;i<length;i+=3,j+=3){v1.x=array[j];v1.y=array[j+1];v1.z=array[j+2];v1.applyMatrix4(this);array[j]=v1.x;array[j+1]=v1.y;array[j+2]=v1.z}return array}};Matrix4.prototype.makeTranslation=function(x,y,z){this.set(1,0,0,x,0,1,0,y,0,0,1,z,0,0,0,1);return this};Matrix4.prototype.multiplyScalar=function(s){var te=this.elements;te[0]*=s;te[4]*=s;te[8]*=s;te[12]*=s;te[1]*=s;te[5]*=s;te[9]*=s;te[13]*=s;te[2]*=s;te[6]*=s;te[10]*=s;te[14]*=s;te[3]*=s;te[7]*=s;te[11]*=s;te[15]*=s;return this};Matrix4.prototype.set=function(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){var te=this.elements;te[0]=n11;te[4]=n12;te[8]=n13;te[12]=n14;te[1]=n21;te[5]=n22;te[9]=n23;te[13]=n24;te[2]=n31;te[6]=n32;te[10]=n33;te[14]=n34;te[3]=n41;te[7]=n42;te[11]=n43;te[15]=n44;return this};Matrix4.prototype.makeScale=function(x,y,z){this.set(x,0,0,0,0,y,0,0,0,0,z,0,0,0,0,1);return this};exports.default=Matrix4},"./plane.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _vector=__webpack_require__("./vector3.js"),_vector2=_interopRequireDefault(_vector);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Plane=function Plane(normal,constant){this.normal=void 0!==normal?normal:new _vector2.default(1,0,0);this.constant=void 0!==constant?constant:0};Plane.prototype={constructor:Plane,set:function set(normal,constant){this.normal.copy(normal);this.constant=constant;return this},setComponents:function setComponents(x,y,z,w){this.normal.set(x,y,z);this.constant=w;return this},setFromNormalAndCoplanarPoint:function setFromNormalAndCoplanarPoint(normal,point){this.normal.copy(normal);this.constant=-point.dot(this.normal);return this},setFromCoplanarPoints:function(){var v1=new _vector2.default,v2=new _vector2.default;return function(a,b,c){var normal=v1.subVectors(c,b).cross(v2.subVectors(a,b)).normalize();this.setFromNormalAndCoplanarPoint(normal,a);return this}}(),copy:function copy(plane){this.normal.copy(plane.normal);this.constant=plane.constant;return this},normalize:function normalize(){var inverseNormalLength=1/this.normal.length();this.normal.multiplyScalar(inverseNormalLength);this.constant*=inverseNormalLength;return this},negate:function negate(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function distanceToPoint(point){return this.normal.dot(point)+this.constant},distanceToSphere:function distanceToSphere(sphere){return this.distanceToPoint(sphere.center)-sphere.radius},projectPoint:function projectPoint(point,optionalTarget){return this.orthoPoint(point,optionalTarget).sub(point).negate()},orthoPoint:function orthoPoint(point,optionalTarget){var perpendicularMagnitude=this.distanceToPoint(point),result=optionalTarget||new _vector2.default;return result.copy(this.normal).multiplyScalar(perpendicularMagnitude)},isIntersectionLine:function isIntersectionLine(line){var startSign=this.distanceToPoint(line.start),endSign=this.distanceToPoint(line.end);return 0>startSign&&0<endSign||0>endSign&&0<startSign},intersectLine:function(){var v1=new _vector2.default;return function(line,optionalTarget){var result=optionalTarget||new _vector2.default,direction=line.delta(v1),denominator=this.normal.dot(direction);if(0===denominator){if(0===this.distanceToPoint(line.start)){return result.copy(line.start)}return}var t=-(line.start.dot(this.normal)+this.constant)/denominator;if(0>t||1<t){return}return result.copy(direction).multiplyScalar(t).add(line.start)}}(),intersectPlane:function intersectPlane(targetPlane){var direction=this.normal.clone().cross(targetPlane.normal),origin=new _vector2.default,intersectionData={origin:origin,direction:direction};if(1e-10>this.normal.clone().cross(targetPlane.normal).length){intersectionData.direction=new _vector2.default;return intersectionData}var h1=this.constant,h2=targetPlane.constant,n1dotn2=this.normal.clone().dot(targetPlane.normal),c1=-(h1-h2*n1dotn2)/(1-n1dotn2*n1dotn2),c2=-(h2-h1*n1dotn2)/(1-n1dotn2*n1dotn2);intersectionData.origin=this.normal.clone().multiplyScalar(c1).add(targetPlane.normal.clone().multiplyScalar(c2));return intersectionData},coplanarPoint:function coplanarPoint(optionalTarget){var result=optionalTarget||new _vector2.default;return result.copy(this.normal).multiplyScalar(-this.constant)},translate:function translate(offset){this.constant=this.constant-offset.dot(this.normal);return this},equals:function equals(plane){return plane.normal.equals(this.normal)&&plane.constant===this.constant},clone:function clone(){return new Plane().copy(this)}};exports.default=Plane},"./point.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function pageToPoint(e){return{x:e.pageX,y:e.pageY}}function subtract(lhs,rhs){return{x:lhs.x-rhs.x,y:lhs.y-rhs.y}}function copy(point){return{x:point.x,y:point.y}}function distance(from,to){return _Mathsqrt(distanceSquared(from,to))}function distanceSquared(from,to){var delta=subtract(from,to);return delta.x*delta.x+delta.y*delta.y}function insideRect(point,rect){if(point.x<rect.left||point.x>rect.left+rect.width||point.y<rect.top||point.y>rect.top+rect.height){return!1}return!0}function findClosestPoint(sources,target){var distances=[],minDistance;sources.forEach(function(source,index){var d=distance(source,target);distances.push(d);if(0===index){minDistance=d}else{minDistance=_Mathmin(d,minDistance)}});var index=distances.indexOf(minDistance);return sources[index]}var point={subtract:subtract,copy:copy,pageToPoint:pageToPoint,distance:distance,distanceSquared:distanceSquared,insideRect:insideRect,findClosestPoint:findClosestPoint};exports.default=point},"./quaternion.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Quaternion=function Quaternion(x,y,z,w){this.x=x||0;this.y=y||0;this.z=z||0;this.w=void 0!==w?w:1};Quaternion.prototype.setFromAxisAngle=function(axis,angle){var halfAngle=angle/2,s=Math.sin(halfAngle);this.x=axis.x*s;this.y=axis.y*s;this.z=axis.z*s;this.w=Math.cos(halfAngle);return this};Quaternion.prototype.multiplyQuaternions=function(a,b){var qax=a.x,qay=a.y,qaz=a.z,qaw=a.w,qbx=b.x,qby=b.y,qbz=b.z,qbw=b.w;this.x=qax*qbw+qaw*qbx+qay*qbz-qaz*qby;this.y=qay*qbw+qaw*qby+qaz*qbx-qax*qbz;this.z=qaz*qbw+qaw*qbz+qax*qby-qay*qbx;this.w=qaw*qbw-qax*qbx-qay*qby-qaz*qbz;return this};Quaternion.prototype.setFromRotationMatrix=function(m){var te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10],trace=m11+m22+m33,s;if(0<trace){s=.5/_Mathsqrt(trace+1);this.w=.25/s;this.x=(m32-m23)*s;this.y=(m13-m31)*s;this.z=(m21-m12)*s}else if(m11>m22&&m11>m33){s=2*_Mathsqrt(1+m11-m22-m33);this.w=(m32-m23)/s;this.x=.25*s;this.y=(m12+m21)/s;this.z=(m13+m31)/s}else if(m22>m33){s=2*_Mathsqrt(1+m22-m11-m33);this.w=(m13-m31)/s;this.x=(m12+m21)/s;this.y=.25*s;this.z=(m23+m32)/s}else{s=2*_Mathsqrt(1+m33-m11-m22);this.w=(m21-m12)/s;this.x=(m13+m31)/s;this.y=(m23+m32)/s;this.z=.25*s}return this};exports.default=Quaternion},"./rect.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _lineSegment=__webpack_require__("./lineSegment.js"),_lineSegment2=_interopRequireDefault(_lineSegment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function rectToLineSegments(rect){var top={start:{x:rect.left,y:rect.top},end:{x:rect.left+rect.width,y:rect.top}},right={start:{x:rect.left+rect.width,y:rect.top},end:{x:rect.left+rect.width,y:rect.top+rect.height}},bottom={start:{x:rect.left+rect.width,y:rect.top+rect.height},end:{x:rect.left,y:rect.top+rect.height}},left={start:{x:rect.left,y:rect.top+rect.height},end:{x:rect.left,y:rect.top}},lineSegments=[top,right,bottom,left];return lineSegments}function distanceToPoint(rect,point){var minDistance=655535,lineSegments=rectToLineSegments(rect);lineSegments.forEach(function(segment){var distance=_lineSegment2.default.distanceToPoint(segment,point);if(distance<minDistance){minDistance=distance}});return minDistance}function rectToPoints(rect){var rectPoints={topLeft:{x:rect.left,y:rect.top},bottomRight:{x:rect.left+rect.width,y:rect.top+rect.height}};return rectPoints}function doesIntersect(rect1,rect2){var intersectLeftRight,intersectTopBottom,rect1Points=rectToPoints(rect1),rect2Points=rectToPoints(rect2);if(0<=rect1.width){if(0<=rect2.width){intersectLeftRight=!(rect1Points.bottomRight.x<=rect2Points.topLeft.x||rect2Points.bottomRight.x<=rect1Points.topLeft.x)}else{intersectLeftRight=!(rect1Points.bottomRight.x<=rect2Points.bottomRight.x||rect2Points.topLeft.x<=rect1Points.topLeft.x)}}else if(0<=rect2.width){intersectLeftRight=!(rect1Points.topLeft.x<=rect2Points.topLeft.x||rect2Points.bottomRight.x<=rect1Points.bottomRight.x)}else{intersectLeftRight=!(rect1Points.topLeft.x<=rect2Points.bottomRight.x||rect2Points.topLeft.x<=rect1Points.bottomRight.x)}if(0<=rect1.height){if(0<=rect2.height){intersectTopBottom=!(rect1Points.bottomRight.y<=rect2Points.topLeft.y||rect2Points.bottomRight.y<=rect1Points.topLeft.y)}else{intersectTopBottom=!(rect1Points.bottomRight.y<=rect2Points.bottomRight.y||rect2Points.topLeft.y<=rect1Points.topLeft.y)}}else if(0<=rect2.height){intersectTopBottom=!(rect1Points.topLeft.y<=rect2Points.topLeft.y||rect2Points.bottomRight.y<=rect1Points.bottomRight.y)}else{intersectTopBottom=!(rect1Points.topLeft.y<=rect2Points.bottomRight.y||rect2Points.top<=rect1Points.bottomRight.y)}return intersectLeftRight&&intersectTopBottom}function getIntersectionRect(rect1,rect2){var _Mathmax=Math.max,intersectRect={topLeft:{},bottomRight:{}};if(!doesIntersect(rect1,rect2)){return}var rect1Points=rectToPoints(rect1),rect2Points=rectToPoints(rect2);if(0<=rect1.width){if(0<=rect2.width){intersectRect.topLeft.x=_Mathmax(rect1Points.topLeft.x,rect2Points.topLeft.x);intersectRect.bottomRight.x=_Mathmin(rect1Points.bottomRight.x,rect2Points.bottomRight.x)}else{intersectRect.topLeft.x=_Mathmax(rect1Points.topLeft.x,rect2Points.bottomRight.x);intersectRect.bottomRight.x=_Mathmin(rect1Points.bottomRight.x,rect2Points.topLeft.x)}}else if(0<=rect2.width){intersectRect.topLeft.x=_Mathmin(rect1Points.topLeft.x,rect2Points.bottomRight.x);intersectRect.bottomRight.x=_Mathmax(rect1Points.bottomRight.x,rect2Points.topLeft.x)}else{intersectRect.topLeft.x=_Mathmin(rect1Points.topLeft.x,rect2Points.topLeft.x);intersectRect.bottomRight.x=_Mathmax(rect1Points.bottomRight.x,rect2Points.bottomRight.x)}if(0<=rect1.height){if(0<=rect2.height){intersectRect.topLeft.y=_Mathmax(rect1Points.topLeft.y,rect2Points.topLeft.y);intersectRect.bottomRight.y=_Mathmin(rect1Points.bottomRight.y,rect2Points.bottomRight.y)}else{intersectRect.topLeft.y=_Mathmax(rect1Points.topLeft.y,rect2Points.bottomRight.y);intersectRect.bottomRight.y=_Mathmin(rect1Points.bottomRight.y,rect2Points.topLeft.y)}}else if(0<=rect2.height){intersectRect.topLeft.y=_Mathmin(rect1Points.topLeft.y,rect2Points.bottomRight.y);intersectRect.bottomRight.y=_Mathmax(rect1Points.bottomRight.y,rect2Points.topLeft.y)}else{intersectRect.topLeft.y=_Mathmin(rect1Points.topLeft.y,rect2Points.topLeft.y);intersectRect.bottomRight.y=_Mathmax(rect1Points.bottomRight.y,rect2Points.bottomRight.y)}return intersectRect}var rect={distanceToPoint:distanceToPoint,getIntersectionRect:getIntersectionRect};exports.default=rect},"./vector3.js":function(module,exports,__webpack_require__){"use strict";var _Mathceil=Math.ceil,_Mathfloor=Math.floor;Object.defineProperty(exports,"__esModule",{value:!0});var _quaternion=__webpack_require__("./quaternion.js"),_quaternion2=_interopRequireDefault(_quaternion),_math=__webpack_require__("./math.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Vector3=function Vector3(x,y,z){this.x=x||0;this.y=y||0;this.z=z||0};Vector3.prototype={constructor:Vector3,set:function set(x,y,z){this.x=x;this.y=y;this.z=z;return this},setX:function setX(x){this.x=x;return this},setY:function setY(y){this.y=y;return this},setZ:function setZ(z){this.z=z;return this},setComponent:function setComponent(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;case 2:this.z=value;break;default:throw new Error("index is out of range: "+index);}},getComponent:function getComponent(index){switch(index){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+index);}},copy:function copy(v){this.x=v.x;this.y=v.y;this.z=v.z;return this},add:function add(v,w){if(void 0!==w){console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(v,w)}this.x+=v.x;this.y+=v.y;this.z+=v.z;return this},addScalar:function addScalar(s){this.x+=s;this.y+=s;this.z+=s;return this},addVectors:function addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function sub(v,w){if(void 0!==w){console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(v,w)}this.x-=v.x;this.y-=v.y;this.z-=v.z;return this},subVectors:function subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function multiply(v,w){if(void 0!==w){console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(v,w)}this.x*=v.x;this.y*=v.y;this.z*=v.z;return this},multiplyScalar:function multiplyScalar(scalar){this.x*=scalar;this.y*=scalar;this.z*=scalar;return this},multiplyVectors:function multiplyVectors(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyAxisAngle:function(){var quaternion;return function(axis,angle){if(void 0===quaternion){quaternion=new _quaternion2.default}this.applyQuaternion(quaternion.setFromAxisAngle(axis.normalize(),angle));return this}}(),applyMatrix3:function applyMatrix3(m){var x=this.x,y=this.y,z=this.z,e=m.elements;this.x=e[0]*x+e[3]*y+e[6]*z;this.y=e[1]*x+e[4]*y+e[7]*z;this.z=e[2]*x+e[5]*y+e[8]*z;return this},applyMatrix4:function applyMatrix4(m){var x=this.x,y=this.y,z=this.z,e=m.elements;this.x=e[0]*x+e[4]*y+e[8]*z+e[12];this.y=e[1]*x+e[5]*y+e[9]*z+e[13];this.z=e[2]*x+e[6]*y+e[10]*z+e[14];return this},applyProjection:function applyProjection(m){var x=this.x,y=this.y,z=this.z,e=m.elements,d=1/(e[3]*x+e[7]*y+e[11]*z+e[15]);this.x=(e[0]*x+e[4]*y+e[8]*z+e[12])*d;this.y=(e[1]*x+e[5]*y+e[9]*z+e[13])*d;this.z=(e[2]*x+e[6]*y+e[10]*z+e[14])*d;return this},applyQuaternion:function applyQuaternion(q){var x=this.x,y=this.y,z=this.z,qx=q.x,qy=q.y,qz=q.z,qw=q.w,ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;this.x=ix*qw+iw*-qx+iy*-qz-iz*-qy;this.y=iy*qw+iw*-qy+iz*-qx-ix*-qz;this.z=iz*qw+iw*-qz+ix*-qy-iy*-qx;return this},transformDirection:function transformDirection(m){var x=this.x,y=this.y,z=this.z,e=m.elements;this.x=e[0]*x+e[4]*y+e[8]*z;this.y=e[1]*x+e[5]*y+e[9]*z;this.z=e[2]*x+e[6]*y+e[10]*z;this.normalize();return this},divide:function divide(v){this.x/=v.x;this.y/=v.y;this.z/=v.z;return this},divideScalar:function divideScalar(scalar){if(0!==scalar){var invScalar=1/scalar;this.x*=invScalar;this.y*=invScalar;this.z*=invScalar}else{this.x=0;this.y=0;this.z=0}return this},min:function min(v){if(this.x>v.x){this.x=v.x}if(this.y>v.y){this.y=v.y}if(this.z>v.z){this.z=v.z}return this},max:function max(v){if(this.x<v.x){this.x=v.x}if(this.y<v.y){this.y=v.y}if(this.z<v.z){this.z=v.z}return this},clamp:function clamp(min,max){if(this.x<min.x){this.x=min.x}else if(this.x>max.x){this.x=max.x}if(this.y<min.y){this.y=min.y}else if(this.y>max.y){this.y=max.y}if(this.z<min.z){this.z=min.z}else if(this.z>max.z){this.z=max.z}return this},clampScalar:function(){var min,max;return function(minVal,maxVal){if(void 0===min){min=new Vector3;max=new Vector3}min.set(minVal,minVal,minVal);max.set(maxVal,maxVal,maxVal);return this.clamp(min,max)}}(),floor:function floor(){this.x=_Mathfloor(this.x);this.y=_Mathfloor(this.y);this.z=_Mathfloor(this.z);return this},ceil:function ceil(){this.x=_Mathceil(this.x);this.y=_Mathceil(this.y);this.z=_Mathceil(this.z);return this},round:function round(){var _Mathround=Math.round;this.x=_Mathround(this.x);this.y=_Mathround(this.y);this.z=_Mathround(this.z);return this},roundToZero:function roundToZero(){this.x=0>this.x?_Mathceil(this.x):_Mathfloor(this.x);this.y=0>this.y?_Mathceil(this.y):_Mathfloor(this.y);this.z=0>this.z?_Mathceil(this.z):_Mathfloor(this.z);return this},negate:function negate(){return this.multiplyScalar(-1)},dot:function dot(v){return this.x*v.x+this.y*v.y+this.z*v.z},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function length(){return _Mathsqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function lengthManhattan(){var _Mathabs=Math.abs;return _Mathabs(this.x)+_Mathabs(this.y)+_Mathabs(this.z)},normalize:function normalize(){return this.divideScalar(this.length())},setLength:function setLength(l){var oldLength=this.length();if(0!==oldLength&&l!==oldLength){this.multiplyScalar(l/oldLength)}return this},lerp:function lerp(v,alpha){this.x+=(v.x-this.x)*alpha;this.y+=(v.y-this.y)*alpha;this.z+=(v.z-this.z)*alpha;return this},cross:function cross(v,w){if(void 0!==w){console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(v,w)}var x=this.x,y=this.y,z=this.z;this.x=y*v.z-z*v.y;this.y=z*v.x-x*v.z;this.z=x*v.y-y*v.x;return this},crossVectors:function crossVectors(a,b){var ax=a.x,ay=a.y,az=a.z,bx=b.x,by=b.y,bz=b.z;this.x=ay*bz-az*by;this.y=az*bx-ax*bz;this.z=ax*by-ay*bx;return this},projectOnVector:function(){var v1,dot;return function(vector){if(void 0===v1){v1=new Vector3}v1.copy(vector).normalize();dot=this.dot(v1);return this.copy(v1).multiplyScalar(dot)}}(),projectOnPlane:function(){var v1;return function(planeNormal){if(void 0===v1){v1=new Vector3}v1.copy(this).projectOnVector(planeNormal);return this.sub(v1)}}(),reflect:function(){var v1;return function(normal){if(void 0===v1){v1=new Vector3}return this.sub(v1.copy(normal).multiplyScalar(2*this.dot(normal)))}}(),angleTo:function angleTo(v){var theta=this.dot(v)/(this.length()*v.length());return Math.acos((0,_math.clamp)(theta,-1,1))},distanceTo:function distanceTo(v){return _Mathsqrt(this.distanceToSquared(v))},distanceToSquared:function distanceToSquared(v){var dx=this.x-v.x,dy=this.y-v.y,dz=this.z-v.z;return dx*dx+dy*dy+dz*dz},setFromMatrixPosition:function setFromMatrixPosition(m){this.x=m.elements[12];this.y=m.elements[13];this.z=m.elements[14];return this},setFromMatrixScale:function setFromMatrixScale(m){var sx=this.set(m.elements[0],m.elements[1],m.elements[2]).length(),sy=this.set(m.elements[4],m.elements[5],m.elements[6]).length(),sz=this.set(m.elements[8],m.elements[9],m.elements[10]).length();this.x=sx;this.y=sy;this.z=sz;return this},setFromMatrixColumn:function setFromMatrixColumn(index,matrix){var offset=4*index,me=matrix.elements;this.x=me[offset];this.y=me[offset+1];this.z=me[offset+2];return this},equals:function equals(v){return v.x===this.x&&v.y===this.y&&v.z===this.z},fromArray:function fromArray(array){this.x=array[0];this.y=array[1];this.z=array[2];return this},toArray:function toArray(){return[this.x,this.y,this.z]},clone:function clone(){return new Vector3(this.x,this.y,this.z)}};exports.default=Vector3}})});